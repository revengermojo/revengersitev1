---
import shell from "../components/shell.astro";
---
<shell title="Blog">
  <h1 class="big-neon">BLOG</h1>
  <p class="typewriter">Live feed of the hacker world â€” top blogs, news, and research.</p>

  <section id="feeds" class="feed-grid">
    <p>Loading articles...</p>
  </section>

  <script type="module">
    const feeds = [
  { name: "The Hacker News", url: "https://thehackernews.com/feeds/posts/default" },
  { name: "Intigriti Blog", url: "https://blog.intigriti.com/feed/" },
  { name: "HackerOne Hacktivity", url: "https://hackerone.com/hacktivity/overview" },
  { name: "Dark Reading", url: "https://www.darkreading.com/rss.xml" },
  { name: "Bleeping Computer", url: "https://www.bleepingcomputer.com/feed/" },
  { name: "Krebs on Security", url: "https://krebsonsecurity.com/feed/" },
  { name: "Security Affairs", url: "https://securityaffairs.com/feed" },
  { name: "CSO Online", url: "https://www.csoonline.com/feed" },
  { name: "SecurityWeek", url: "https://www.securityweek.com/rss" },
  { name: "Darknet Diaries", url: "https://darknetdiaries.com/feed/" },
  { name: "Troy Hunt Blog", url: "https://www.troyhunt.com/rss/" },
  { name: "Schneier on Security", url: "https://www.schneier.com/feed/atom/" },
  { name: "Pentester Land Writeups", url: "https://pentester.land/list-of-bug-bounty-writeups/rss/" },
  { name: "YesWeHack Disclosures", url: "https://yeswehack.com/hacktivity" },
  { name: "HackerOne Hacktivity", url: "https://hackerone.com/hacktivity.rss" },
  { name: "Bugcrowd Blog", url: "https://bugcrowd.com/blog/" },
  { name: "Bugbounty World", url: "https://bugbountyworld.com/slack-archives/#blogs" },
];


    async function loadFeeds() {
      const container = document.getElementById("feeds");
      container.innerHTML = "";

      for (const f of feeds) {
        try {
          const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(f.url)}`);
          const json = await res.json();
          const articles = json.items.slice(0, 5); // show top 5 per source

          const block = document.createElement("div");
          block.className = "feed-source";
          block.innerHTML = `
            <h2 class="feed-title">${f.name}</h2>
            <ul>
              ${articles.map(a => `
                <li class="feed-card">
                  <a href="${a.link}" target="_blank" rel="noopener">
                    <span class="title">${a.title}</span>
                  </a>
                </li>
              `).join("")}
            </ul>
          `;
          container.appendChild(block);
        } catch (err) {
          console.error("Feed error:", f.name, err);
        }
      }
    }

    loadFeeds();
  </script>
</shell>
